<!-- 

<h2 class="title">ההודעות שלי</h2>
<div class="container" *ngIf="latestMessages.length > 0; else noMessages">
  <div class="card" *ngFor="let message of latestMessages"
    [class.unread]="message.read_status === '0'"
    [class.read]="message.read_status === '1'"
  >
    <img
      src="../../../assets/img/messagr-img.png"
      alt="Message Image"
      class="card-image"
    />

    <div class="card-content">
      <h3 class="card-title">
        <span *ngIf="message.postDetails">
          {{ message.postDetails.post_city }} •
          {{ message.postDetails.post_street }}
          {{ message.postDetails.post_building_number }}
        </span>
      </h3>

      <div class="card-text" (click)="toggleReadStatus(message)">
        <span *ngIf="!message.showFullText">{{
          message.user_message.substring(0, 50) + "..."
        }}</span>
        <span *ngIf="message.showFullText"
          >{{ message.user_message }}

          <span *ngIf="message.postDetails.confirmation_status">
            <span class="link" (click)="navigateToLink(message)" [routerLink]="generateLink(message)">
              כאן
            </span>
          </span>
        </span>
        <span
          *ngIf="message.user_message.length >= 50"
          class="read-more"
          (click)="toggleText(message)"
        >
          {{ message.showFullText ? "קרא פחות" : "קרא עוד" }}
        </span>
      </div>
      <div class="date-delet">
        <button mat-icon-button color="warn" (click)="deleteMessage(message)">
          <mat-icon>delete</mat-icon>
        </button>
        <p class="card-date">
          {{ message.date | date : "dd/MM/yyyy" }} •
          {{ message.date | date : "HH:mm" }}
        </p>
      </div>

<p class="members-count">Members: {{ message.membersCount }}</p>

    </div>
  </div>
</div>

<ng-template #noMessages>
  <div class="no-messages">
    <img src="../../../assets/img/messages.svg" alt="">
    <h3>אין לנו עדיין הודעות בשבילך</h3>
    <p>אל דאגה,נעדכן אותך כשיהיה לנו משהו לספר</p>
  </div>
</ng-template> -->








<!-- user-messages.component.html -->
<!-- <section class="container" *ngIf="latestMessages.length > 0; else noMessages">
  <h2>ההודעות שלי</h2>
  <div *ngFor="let postGroup of transformedMessages; let i = index">
    <div class="post-card" (click)="toggleGroupMessages(postGroup)">
      <p>
        {{ postGroup[0]?.postDetails?.post_city }},
        {{ postGroup[0]?.postDetails?.post_street }},
        {{ postGroup[0]?.postDetails?.post_building_number }}
      </p>
    </div>

    <div *ngIf="isStepperOpen && selectedPostGroup === postGroup" class="messages-container">
      <mat-stepper orientation="vertical" #stepper class="custom-stepper" [selectedIndex]="selectedPostGroup?.length - 1" mode="readonly">
        <ng-container *ngFor="let message of selectedPostGroup?.slice().reverse(); let j = index">
          <mat-step>
            <ng-template matStepLabel>
              <div class="message-label-content">{{ message?.user_message }}</div>
            </ng-template>
            <ng-template matStepContent>
              <div class="message-card">
                <p class="message-content">{{ message?.user_message }}</p>
                <p class="card-date">
                  {{ message.date | date : "dd/MM/yyyy" }} •
                  {{ message.date | date : "HH:mm" }}
                </p>
              </div>
            </ng-template>
          </mat-step>
        </ng-container>
      </mat-stepper>
    </div>
  </div>
</section>

<ng-template #noMessages>
  <div class="no-messages">
    <img src="../../../assets/img/messages.svg" alt="">
    <h3>אין לנו עדיין הודעות בשבילך</h3>
    <p>אל דאגה,נעדכן אותך כשיהיה לנו משהו לספר</p>
  </div>
</ng-template> -->






















<!-- user-messages.component.html -->
<section class="container" *ngIf="latestMessages.length > 0; else noMessages">
  <h2>ההודעות שלי</h2>
  <div *ngFor="let postGroup of transformedMessages; let i = index">
    <!-- Card for Post Details -->
    <div class="post-card" (click)="toggleGroupMessages(postGroup)">
      <p>
        {{ postGroup[0]?.postDetails?.post_city }},
        {{ postGroup[0]?.postDetails?.post_street }},
        {{ postGroup[0]?.postDetails?.post_building_number }}
      </p>
      <!-- Add other post details as needed -->
    </div>

    <!-- Open div for additional cards when the post card is clicked -->
    <div *ngIf="isStepperOpen && selectedPostGroup === postGroup" class="messages-container">
      <!-- Use app-timeline component with messages as input -->
      <app-timeline [messages]="selectedPostGroup"></app-timeline>
    </div>
  </div>
</section>

<ng-template #noMessages>
  <div class="no-messages">
    <img src="../../../assets/img/messages.svg" alt="">
    <h3>אין לנו עדיין הודעות בשבילך</h3>
    <p>אל דאגה,נעדכן אותך כשיהיה לנו משהו לספר</p>
  </div>
</ng-template>